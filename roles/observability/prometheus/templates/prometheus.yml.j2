global:
  scrape_interval: {{ observability_prometheus_scrape_interval }}

{% if observability_alertmanager_enabled is defined and observability_alertmanager_enabled %}
alerting:
  alertmanagers:
    - static_configs:
        - targets:
            - '{{ observability_alertmanager_container_name }}:9093'
{% endif %}

scrape_configs:
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

{% if observability_cadvisor_enabled is defined and observability_cadvisor_enabled %}
  - job_name: 'cadvisor'
    static_configs:
      - targets: ['{{ observability_cadvisor_container_name }}:8080']
{% endif %}

{% if observability_node_exporter_enabled is defined and observability_node_exporter_enabled %}
  - job_name: 'node-exporter'
    static_configs:
      - targets: ['{{ observability_node_exporter_container_name }}:9100']
{% endif %}
